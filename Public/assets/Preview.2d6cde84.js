import{r as i,c as a,w as e,o as s,a as t,b as d,t as o,u as l,F as m,h as n,x as r,i as u,j as c,m as p,k as y}from"./index.af040183.js";import{a as f}from"./teambition.bfa112ec.js";import{_ as b,f as v,a as g,b as x,C as h,d as k}from"./clipboard.18a78703.js";import{_ as w}from"./Player.04698bf2.js";const I={class:"mdui-m-t-5"},_={class:"mdui-card mdui-shadow-3 mdui-p-a-2",style:{"border-radius":"8px"}},j={key:1,class:"mdui-card-content"},U={class:"mdui-typo mdui-m-t-2"},q={class:"mdui-typo-title-opacity"},C={class:"mdui-typo-subheading-opacity"},z={class:"mdui-m-t-2",style:{"min-height":"300px"}},F={key:0},P={key:1},A={key:2},B={key:3},D=d("p",null,"此文件暂不支持预览",-1),E={class:"mdui-typo mdui-m-t-2"},G={class:"mdui-textfield"},H=d("i",{class:"mdui-icon material-icons"},"links",-1),J=d("i",{class:"mdui-icon material-icons"},"content_copy",-1),K=n(" 复制 "),L=d("i",{class:"mdui-icon material-icons"},"file_download",-1),M={expose:[],setup(n){const M=r(),N=(u(),c()),O=i({parentId:"",item:{},loading:!1}),Q=a((()=>k(N.query.nodeId,""))),R=a((()=>M.state.user)),S=async()=>{O.loading=!0,await f({_id:R._id,nodeId:Q.value,offset:O.offset,limit:O.limit}).then((i=>{O.loading=!1;const a=i.result;O.item=a,O.parentId=a.parentId}))};return e((()=>N.query.nodeId),(async i=>{!1===k(i,!1)&&""!==i||await S()})),s((()=>{S()})),(i,a)=>(y(),t(m,null,[d("div",I,[d("div",_,[O.loading?(y(),t(b,{key:0,color:"mdui-color-blue-200"})):(y(),t("div",j,[d("div",U,[d("div",q,o(O.item.name),1),d("div",C,o(l(v)(O.item.size)),1)]),d("div",z,[l(g)(O.item.ext,l(x).image)?(y(),t("div",F,[d("img",{class:"mdui-img-fluid",src:O.item.downloadUrl,alt:O.item.name},null,8,["src","alt"])])):l(g)(O.item.ext,l(x).video)?(y(),t("div",P,[d(w,{source:O.item.downloadUrl,type:"video"},null,8,["source"])])):l(g)(O.item.ext,l(x).audio)?(y(),t("div",A,[d(w,{source:O.item.downloadUrl,type:"audio"},null,8,["source"])])):(y(),t("div",B,[D]))]),d("div",E,[d("div",G,[H,d("input",{class:"mdui-textfield-input",type:"text",id:"link",value:O.item.downloadUrl},null,8,["value"])]),d("button",{onClick:a[1]||(a[1]=i=>(()=>{const i=new h(".clipboard");i.on("success",(a=>{p.snackbar({message:":) 复制成功",timeout:2e3,position:"right-top"}),i.destroy()})),i.on("error",(a=>{console.error("该浏览器不支持自动复制"),i.destroy()}))})()),"data-clipboard-target":"#link",class:"clipboard mdui-btn mdui-btn-raised mdui-btn-dense mdui-ripple mdui-color-theme-accent mdui-float-right"},[J,K])])]))])]),d("a",{href:O.item.downloadUrl,class:"mdui-fab mdui-fab-fixed mdui-ripple mdui-color-theme-accent"},[L],8,["href"])],64))}};export default M;
