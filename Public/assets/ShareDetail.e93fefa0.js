import{r as i,c as a,w as s,o as e,a as t,b as d,t as o,u as l,F as m,h as c,i as r,j as n,m as u,k as p}from"./index.8f74753c.js";import{a as y}from"./share.fe8fbfd4.js";import{_ as f,f as v,a as b,b as h,C as g,d as k}from"./clipboard.623c6b1d.js";import{_ as w}from"./Player.8ce553aa.js";const x={class:"mdui-m-t-5"},j={class:"mdui-card mdui-shadow-3 mdui-p-a-2",style:{"border-radius":"8px"}},U={key:1,class:"mdui-card-content"},_={class:"mdui-typo mdui-m-t-2"},C={class:"mdui-typo-title-opacity"},z={class:"mdui-typo-subheading-opacity"},F={class:"mdui-m-t-2",style:{"min-height":"300px"}},L={key:0},P={key:1},q={key:2},A={key:3},B=d("p",null,"此文件暂不支持预览",-1),D={class:"mdui-typo mdui-m-t-2"},E={class:"mdui-textfield"},G=d("i",{class:"mdui-icon material-icons"},"links",-1),H=d("i",{class:"mdui-icon material-icons"},"content_copy",-1),I=c(" 复制 "),J=d("i",{class:"mdui-icon material-icons"},"file_download",-1),K={expose:[],setup(c){r();const K=n(),M=i({item:{},loading:!1,shareLink:""}),N=a((()=>k(K.params.hash,""))),O=a((()=>window.location.origin+"/s/"+N.value)),Q=async()=>{M.loading=!0,await y(N.value).then((i=>{M.loading=!1;const a=i.result;M.item=a}))};return s((()=>K.params.hash),(async i=>{!1===k(i,!1)&&""!==i||await Q()})),e((()=>{Q()})),(i,a)=>(p(),t(m,null,[d("div",x,[d("div",j,[M.loading?(p(),t(f,{key:0,color:"mdui-color-blue-200"})):(p(),t("div",U,[d("div",_,[d("div",C,o(M.item.name),1),d("div",z,o(l(v)(M.item.size)),1)]),d("div",F,[l(b)(M.item.ext,l(h).image)?(p(),t("div",L,[d("img",{class:"mdui-img-fluid",src:M.item.downloadUrl,alt:M.item.name},null,8,["src","alt"])])):l(b)(M.item.ext,l(h).video)?(p(),t("div",P,[d(w,{source:M.item.downloadUrl,type:"video"},null,8,["source"])])):l(b)(M.item.ext,l(h).audio)?(p(),t("div",q,[d(w,{source:M.item.downloadUrl,type:"audio"},null,8,["source"])])):(p(),t("div",A,[B]))]),d("div",D,[d("div",E,[G,d("input",{class:"mdui-textfield-input",type:"text",id:"link",value:l(O)},null,8,["value"])]),d("button",{onClick:a[1]||(a[1]=i=>(()=>{const i=new g(".clipboard");i.on("success",(a=>{u.snackbar({message:":) 复制成功",timeout:2e3,position:"right-top"}),i.destroy()})),i.on("error",(a=>{console.error("该浏览器不支持自动复制"),i.destroy()}))})()),"data-clipboard-target":"#link",class:"clipboard mdui-btn mdui-btn-raised mdui-btn-dense mdui-ripple mdui-color-theme-accent mdui-float-right"},[H,I])])]))])]),d("a",{href:M.item.downloadUrl,class:"mdui-fab mdui-fab-fixed mdui-ripple mdui-color-theme-accent"},[J],8,["href"])],64))}};export default K;
